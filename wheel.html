<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spinning Wheel (Horizontal Labels)</title>
<style>
  :root {
    --wheel-size: min(480px, 88vw);
    --bg: #f6f7fb;
    --accent: #001e60;
    --text: #fff;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:Inter, system-ui, sans-serif;color:#111}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;box-sizing:border-box}
  .card{width:100%;max-width:900px;background:#fff;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.08);padding:18px;display:grid;grid-template-columns:1fr 300px;gap:18px;align-items:center}
  @media (max-width:820px){ .card{grid-template-columns:1fr; } .controls{order:2} }
  .wheel-wrap{display:flex;align-items:center;justify-content:center}
  .wheel-viewport{width:var(--wheel-size);height:var(--wheel-size);position:relative;border-radius:50%;overflow:visible}
  .wheel{width:100%;height:100%;border-radius:50%;position:relative;transform:rotate(0deg);transition:transform 0.6s cubic-bezier(.2,.8,.2,1);box-shadow: 0 8px 24px rgba(2,6,23,0.12) inset;}
  .labels{position:absolute;inset:0;border-radius:50%;pointer-events:none}
  .label{
    position:absolute;left:50%;top:50%;
    transform-origin:center center;
    white-space:nowrap;font-weight:700;color:var(--text);
    background:rgba(0,0,0,0.3);
    border-radius:6px;padding:6px 10px;
    text-align:center;line-height:1;
  }
  .center{
    position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
    z-index:6;width:36%;max-width:160px;height:36%;max-height:160px;
    border-radius:50%;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(180deg,var(--accent),#003a99);
    color:var(--text);font-weight:800;cursor:pointer;
    box-shadow:0 6px 16px rgba(0,0,0,0.25);border:none;
  }
  .pointer{
    position:absolute;top:-14px;left:50%;transform:translateX(-50%);
    width:0;height:0;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:26px solid var(--accent);z-index:8;
  }
  .controls{padding:12px}
  .controls h3{margin:0 0 8px 0;font-size:16px;color:var(--accent)}
  .controls p{margin:0 0 12px 0;color:#444}
  .input{display:flex;gap:8px;margin-bottom:10px}
  .input input{flex:1;padding:8px;border-radius:8px;border:1px solid #e4e6ef}
  .btn{background:var(--accent);color:#fff;border:none;padding:10px 12px;border-radius:8px;cursor:pointer;font-weight:700}
  .btn.secondary{background:#f1f3f8;color:#001e60;border:1px solid #d8dbe8}
  .result{margin-top:12px;padding:12px;border-radius:8px;background:#f6f9ff;color:#002b66;font-weight:700;display:none}
  footer{grid-column:1/-1;text-align:center;margin-top:10px;font-size:12px;color:#889}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="wheel-wrap">
      <div class="wheel-viewport">
        <div class="pointer"></div>
        <div id="wheel" class="wheel"></div>
        <div class="labels" id="labels"></div>
        <button id="spin" class="center">SPIN</button>
      </div>
    </div>

    <div class="controls">
      <h3>Spinning Wheel</h3>
      <p>Enter comma-separated labels for the wheel below, or use the defaults.</p>
      <div class="input">
        <input id="segmentsInput" placeholder="Prize 1, Prize 2, Prize 3, ...">
        <button id="apply" class="btn secondary">Apply</button>
      </div>
      <div style="display:flex;gap:8px">
        <button id="spinBtn" class="btn">Spin</button>
        <button id="quickSpin" class="btn secondary">Quick Spin</button>
      </div>
      <div id="result" class="result"></div>
    </div>
  </div>
</div>

<script>
(function(){
  const defaultSegments = ["$5","$10","Try Again","$50","Free Ship","$100","Extra Spin","Mystery"];
  const defaultColors = ["#FF7F50","#FFB347","#FFD93D","#8BD3DD","#66CDAA","#8FBC8F","#C19AB7","#FF9AA2"];
  const wheelEl = document.getElementById('wheel');
  const labelsContainer = document.getElementById('labels');
  const spinBtnCenter = document.getElementById('spin');
  const spinBtn = document.getElementById('spinBtn');
  const quickSpinBtn = document.getElementById('quickSpin');
  const applyBtn = document.getElementById('apply');
  const segmentsInput = document.getElementById('segmentsInput');
  const resultBox = document.getElementById('result');
  let isSpinning=false, segments=[], colors=[];

  function setupSegments(arr){
    segments = arr.slice();
    colors = [];
    for(let i=0;i<segments.length;i++){
      colors.push(defaultColors[i % defaultColors.length]);
    }
    renderWheel();
  }

  function renderWheel(){
    const n = segments.length;
    const angleStep = 360/n;
    const stops = [];
    for(let i=0;i<n;i++){
      const start=i*angleStep, end=start+angleStep;
      stops.push(`${colors[i]} ${start}deg ${end}deg`);
    }
    wheelEl.style.background = `conic-gradient(${stops.join(',')})`;
    labelsContainer.innerHTML='';

    requestAnimationFrame(()=>{
      const rect=wheelEl.getBoundingClientRect();
      const radius=rect.width/2;
      for(let i=0;i<n;i++){
        const angle=(i*angleStep)+(angleStep/2);
        const lbl=document.createElement('div');
        lbl.className='label';
        lbl.textContent=segments[i];
        // distance from center
        const dist = radius*0.65;
        const rad = angle*Math.PI/180;
        const x = dist * Math.sin(rad);
        const y = -dist * Math.cos(rad);
        lbl.style.left=`calc(50% + ${x}px)`;
        lbl.style.top=`calc(50% + ${y}px)`;
        lbl.style.transform=`translate(-50%, -50%)`; // keep horizontal
        labelsContainer.appendChild(lbl);
      }
    });
  }

  function randInt(n){return Math.floor(Math.random()*n);}
  function spin(randomSeed=null,duration=4200){
    if(isSpinning)return;
    isSpinning=true;resultBox.style.display='none';
    const n=segments.length;
    let chosenIndex=randomSeed;
    if(chosenIndex===null)chosenIndex=randInt(n);
    const style=getComputedStyle(wheelEl);
    const matrix=style.transform||'none';
    let currentDeg=0;
    if(matrix!=='none'){
      const values=matrix.split('(')[1].split(')')[0].split(',');
      const a=parseFloat(values[0]);const b=parseFloat(values[1]);
      currentDeg=Math.round(Math.atan2(b,a)*(180/Math.PI));
    }
    currentDeg=((currentDeg%360)+360)%360;
    const anglePer=360/n;
    const targetMid=chosenIndex*anglePer+anglePer/2;
    const finalAngle=360*(3+Math.random()*2)+(360-targetMid);
    const from=currentDeg,to=finalAngle,total=duration,start=performance.now();
    function easeOutCubic(t){return(--t)*t*t+1;}
    function frame(now){
      const t=Math.min(1,(now-start)/total);
      const eased=easeOutCubic(t);
      const value=from+(to-from)*eased;
      wheelEl.style.transform=`rotate(${value}deg)`;
      if(t<1)requestAnimationFrame(frame);
      else{
        isSpinning=false;
        const landedDeg=(value%360+360)%360;
        const index=Math.floor(((360-landedDeg+anglePer/2)%360)/anglePer);
        resultBox.textContent=`You won: ${segments[index]}`;
        resultBox.style.display='block';
      }
    }
    requestAnimationFrame(frame);
  }

  function quickSpin(){spin(null,1800);}
  spinBtnCenter.addEventListener('click',()=>spin());
  spinBtn.addEventListener('click',()=>spin());
  quickSpinBtn.addEventListener('click',quickSpin);
  applyBtn.addEventListener('click',()=>{
    const arr=segmentsInput.value.split(',').map(s=>s.trim()).filter(s=>s);
    if(arr.length>=2)setupSegments(arr);else alert('Please enter at least 2 segments.');
  });
  setupSegments(defaultSegments);
  window.addEventListener('resize',renderWheel);
})();
</script>
</body>
</html>


